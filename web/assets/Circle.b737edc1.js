import{R as e,b as T}from"./vendor.7b712f9f.js";import{e as V,U as j,s as k}from"./main.da775b16.js";import{w as P,b as Z,v as q,u as z,a7 as B,K as U,j as H,B as J,F as N}from"./GeneralCondition.59d0a2ff.js";const K=r=>{const[g,i]=e.useState({disabled:!1,loading:!1}),[m,y]=e.useState(""),[o,f]=e.useState(0),[h,F]=e.useState([]),[s,n]=e.useState([]),[d,L]=e.useState(1),[v,S]=e.useState(""),[C,u]=e.useState(!1),E=T(),A=()=>{s.length>0?L(2):alert("ajouter au moins un membre")},b=a=>{S(a.target.value)},D=()=>{u(!0);var a=new FormData;a.append("members",JSON.stringify(s)),a.append("circle_name",v),a.append("url","RESTAPI/Circle/create"),N("/api",a,t=>{console.log(t),t.success===1&&E(j(t==null?void 0:t.res)),u(!1),E(k(t)),r.navigate(-1)})},w=()=>{i({loading:!0});var a=new FormData;a.append("q",m),a.append("url","RESTAPI/Search/users"),N("/api",a,t=>{i({loading:!1}),F(t.users)})},_=a=>{y(a.target.value),o&&clearTimeout(o),f({typingTimeout:setTimeout(()=>{m.length>0&&w()},1e3)})},x=a=>{const t=s.slice(),c=s.findIndex(l=>l.user_id===a.user_id);c<0?(t.push(a),n(t)):(t.splice(c,1),n(t))},I=a=>{const t=s.slice(),c=t.findIndex(l=>l.user_id===a);c>-1&&(t.splice(c,1),n(t))},p=[];return h.forEach((a,t)=>{var l;const c=s.find(R=>R.user_id===a.user_id);p.push(e.createElement("div",{key:t,className:"Lnl jb3vyjys qt6c0cv9"},e.createElement("div",{className:"page Bsj ElL pIc",onClick:()=>x(a)},e.createElement("div",{className:"Fdo Aic Lsy LDv Ert Vpe"},e.createElement("div",{className:"Fdo ELG yC0tu"},e.createElement("div",{className:"Fdo yC0tu"},e.createElement("div",{className:"Fdo Post-Author-Identity--Avatar Xs-User-Avatar UiOplink d-flex"},e.createElement("img",{src:(l=a==null?void 0:a.avatar)==null?void 0:l.medium,className:"lazyload"}))),e.createElement(Z,{top:a==null?void 0:a.first_name,bottom:`@${a==null?void 0:a.username}`})),e.createElement("div",{className:"Fdo"},c?e.createElement("div",{className:"lZJ Lsy"},e.createElement(z,{size:24})):e.createElement(q,null))))))}),e.createElement(V,{show:!0,onHide:()=>r.navigate(-1),nopadding:"true",size:"gift"},e.createElement("div",{className:"Fdo Anv"},d===1?e.createElement("div",{className:"page Anv Vpe Lsy  LDv"},e.createElement("div",{className:"Lsy LDv"},e.createElement("div",{className:"Fdo Ert Vpe"},e.createElement("span",{className:"yTZ mWe"},"Ajouter des membres"))),s.length>0&&e.createElement("div",{className:"Fdo Vpe"},e.createElement("div",{className:"Fdo ELG info-content lhclo0ds"},s.map(a=>{var t;return e.createElement("div",{className:"Fdo oocd Aic Ngt mWe",key:a.user_id,style:{margin:"0 4px 4px 0"}},e.createElement("div",{className:"Fdo Lsy LDv Ert Vpe Aic"},e.createElement("div",{className:"Fdo yC0tu"},e.createElement("div",{className:"Fdo Post-Author-Identity--Avatar",style:{height:32,width:32}},e.createElement("img",{src:(t=a==null?void 0:a.avatar)==null?void 0:t.medium,className:"lazyload"}))),e.createElement("div",{className:"Fdo"},a.first_name),e.createElement("div",{className:"Lsy"},e.createElement("span",{className:"pIc",onClick:()=>I(a.user_id)},"x"))))})),e.createElement("div",{className:"Fdo"},e.createElement("button",{className:" lZJ v1d sqdOP Lbdf  L3NKy ZIAjV",onClick:A},"suivant"))),e.createElement("div",{className:"Fdo Anv RpE KNH Ftg Rav"},e.createElement(B,{onSearch:_})),e.createElement("div",{className:"Fdo Anv"},e.createElement("div",{className:"Eom"},g.loading?e.createElement("div",{className:"Lnl"},e.createElement(U,{length:3})):e.createElement(e.Fragment,null,p)))):d===2?e.createElement("div",{className:"page Anv Vpe Lsy  LDv"},e.createElement("div",{className:"Lsy LDv"},e.createElement("div",{className:"Fdo Ert Vpe"},e.createElement("span",{className:"yTZ mWe"},"Donner un nom a votre groupe de discussions"))),e.createElement("div",{className:"Fdo Anv RpE"},e.createElement(H,{placeholder:"Donner un nom",value:v,onChange:b})),e.createElement("div",{className:"Fdo aovydwv3 pybr56ya"},e.createElement(J,{variant:"_Dvgb",onClick:D,isLoading:C},"Suivant"))):null))};var G=P(K);export{G as default};

import{b as _,u as m,R as t,g as f}from"./vendor.7b712f9f.js";import{B as u,F as g}from"./GeneralCondition.59d0a2ff.js";import{s as y,r as A,t as L,v as p}from"./main.da775b16.js";const C=a=>{const i=_(),o=m(e=>e),[l,r]=t.useState({loadingAccept:!1,loadingDelete:!1}),d=(e,c)=>{a.disableLink(),c==="REFUSE"?r({loadingDelete:!0}):c==="ACCEPT"&&r({loadingAccept:!0});var n=new FormData;n.append("action",c),n.append("url","RESTAPI/Users/Like"),n.append("liked_id",e),g("./api",n,s=>{if(r({loadingDelete:!1,loadingAccept:!1}),a.disableLink(),i(y(s)),s.success===1&&i(A(e)),s.success===1&&s.payload&&s.payload.type==="ACCEPT"){i(L(a.e)),i(p({user_id:e,name:"has_match_with_viewer"}));let E={data_type:"notifications",sub_type:"NEW_MATCH_REQUEST",c_user:o.Util.c_user.user_id,security_token:f.get("isLogedin"),client_id:parseInt(e),payload:{count:s.payload.count,type:s.payload.type,user:o.Util.c_user}};o.Util.ws.send(JSON.stringify(E))}else s.success===1&&s.payload&&s.payload.type==="REFUSE"&&i(p({user_id:e,name:"has_requested_love_viewer"}))})};return t.createElement(t.Fragment,null,t.createElement("div",{className:"Fdo ELG Ert LDv"},t.createElement(u,{variant:"Lbg ELG",isLoading:l.loadingAccept,disabled:l.loadingDelete,onClick:e=>{e.preventDefault(),d(a.e.user_id,"ACCEPT")}},"oui, je suis interess\xE9")),t.createElement("div",{className:"Fdo ELG Ert"},t.createElement(u,{variant:"_8A5w5 ELG",disabled:l.loadingAccept,isLoading:l.loadingDelete,onClick:e=>{e.preventDefault(),d(a.e.user_id,"REFUSE")}},"\xE7a ne m'interesse pas")))};export{C as B};

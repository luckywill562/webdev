import{_ as m,Y as T,Z as N,I as y,$ as b}from"./main.da775b16.js";import{r as l,b as z,R as e,u as f,L as C,j as L,k as n,O as D,N as P}from"./vendor.7b712f9f.js";import{w as V,L as O,ag as F,F as W}from"./GeneralCondition.59d0a2ff.js";const $=l.exports.lazy(()=>m(()=>import("./MessageList.e6ede11e.js"),["MessageList.e6ede11e.js","vendor.7b712f9f.js","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css"])),B=l.exports.lazy(()=>m(()=>import("./Conversation.76fd11f7.js"),["Conversation.76fd11f7.js","vendor.7b712f9f.js","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css","main.da775b16.js","main.5922880b.css","ProfileSetting.7579865b.js"])),M=l.exports.lazy(()=>m(()=>import("./Welcome.f0b2d538.js"),["Welcome.f0b2d538.js","vendor.7b712f9f.js","main.da775b16.js","main.5922880b.css","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css"])),I=l.exports.lazy(()=>m(()=>import("./MediaView.dd950ea8.js"),["MediaView.dd950ea8.js","vendor.7b712f9f.js","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css","main.da775b16.js","main.5922880b.css"])),U=g=>{const r=z(),[o,d]=e.useState("messages"),[S,A]=e.useState({page:0}),u=10,[E,v]=e.useState(!1),[k,_]=e.useState(!1),p=f(t=>t),a=f(t=>t.InboxList),x=(t,c)=>{var s=new FormData;s.append("url","/RESTAPI/Chat/inbox"),s.append("page",t),s.append("limit",c),s.append("data_type","messages_list"),W("/inbox",s,i=>{if(i.success===1){if(a.message_list){const h=a.message_list.slice();h.push(...i.messages.list),r(b({message_list:h,has_next_page:i.messages.has_next_page}))}else r(b({message_list:i.messages.list,has_next_page:i.messages.has_next_page}));_(!1),v(!1)}})};e.useEffect(()=>{a.length===0&&(v(!0),x(S.page,u)),r(T(0))},[]);const R=()=>{const t=a.message_list,c=t[t.length-1];if(a.message_list.length>0)var s=c.id;else var s=0;_(!0),x(s,u),A({page:s})},w=g.location.state&&g.location.state.mediachat;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Fdo Bcg Nfb ELG Flk main-app-width Pap"},e.createElement("div",{className:"Fdo messagerie-container sLayout"},e.createElement("div",{className:"container-box messages-wrapper"},e.createElement("div",{className:"Fdo messages-listing"},e.createElement("div",{className:"messages-list-wrapper"},e.createElement("div",{className:"messages-list-header"},e.createElement("div",{className:"messages-list-title"},"messages")),e.createElement("div",{className:"conversation-list-content"},e.createElement("div",{className:"Fdo Bsj Bsh Ert Vpe Lsy LDv"},e.createElement("div",{className:"Fdo Ftg Rav "},e.createElement("div",{className:`Fdo Aic Cdf Thn mWe Rav pIc ${o==="messages"?"ActiveTab":""}`,onClick:()=>d("messages")},e.createElement("div",{className:"Fdo Aic Xdg "}," Tous ")),e.createElement("div",{className:`Fdo Aic Cdf Thn mWe pIc ${o==="spam"?"ActiveTab":""}`,onClick:()=>d("spam")},e.createElement("div",{className:"Fdo Aic Xdg "},"spam")))),e.createElement(l.exports.Suspense,{fallback:e.createElement("div",{className:"side-bar-message-wrapper message-scrollabled-list messagerie"},e.createElement(N,null))},e.createElement("div",{className:"side-bar-message-wrapper message-scrollabled-list messagerie"},E?e.createElement(N,null):e.createElement(e.Fragment,null,o==="messages"?e.createElement(e.Fragment,null,a.message_list&&e.createElement(y,{next:R,next_page:a.has_next_page,loading:k,margin:"10px"},a.message_list.map((t,c)=>e.createElement($,{key:t.id,to:`${t.client_id}`,index:c,list:a.message_list,message:t}))),!E&&a.message_list&&a.message_list.length===0&&e.createElement("div",{className:"v2ao Vndf"},e.createElement("p",{className:"mWe"},"Nouveau sur tafaray messenger?"),e.createElement("div",{className:""},"Matchez ou inviter une personnes pour pouvoir discuter. Si vous n'avez pas encore de match, vous pouvez utiliser ",e.createElement(C,{to:"/incognito",className:"mWe"},"incognito")," si vous avez envie de parler avec quelq'un"))):e.createElement("div",{className:"v2ao"},e.createElement("p",null,"votre n'avez aucun message dans votre spam")))))))),e.createElement("div",{className:"messages-text-container Dfk"},e.createElement("div",{className:"conversation-container"},p.Util&&e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement(n,{path:"/",element:e.createElement(D,null)},e.createElement(n,{index:!0,element:e.createElement(M,null)}),e.createElement(n,{path:"/:id/*",element:e.createElement(l.exports.Suspense,{fallback:e.createElement(O,null)},e.createElement(B,{client:p.Util.ws,c_user:p.Util.c_user}))}),e.createElement(n,{path:"/:id.media",element:e.createElement(l.exports.Suspense,{fallback:e.createElement(F,null)},e.createElement(I,null))}),e.createElement(n,{path:"*",element:e.createElement(P,{to:"/404",replace:!0})}))),w&&e.createElement(L,null,e.createElement(n,{path:"/:id.media",element:e.createElement(l.exports.Suspense,{fallback:e.createElement(F,null)},e.createElement(I,null))})))))))))};var G=V(U);export{G as default};

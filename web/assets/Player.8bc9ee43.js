var V=Object.defineProperty,F=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var P=(a,e,s)=>e in a?V(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,c=(a,e)=>{for(var s in e||(e={}))z.call(e,s)&&P(a,s,e[s]);if(M)for(var s of M(e))L.call(e,s)&&P(a,s,e[s]);return a},m=(a,e)=>F(a,T(e));var w=(a,e,s)=>(P(a,typeof e!="symbol"?e+"":e,s),s);import{r as o,R as t,M as R}from"./vendor.7b712f9f.js";import{w as q,F as x,x as B,j as A,B as N,aE as I}from"./GeneralCondition.59d0a2ff.js";import{M as j}from"./main.da775b16.js";class H extends o.exports.Component{constructor(e){super(e);w(this,"ConfirmDeblockage",()=>{this.setState({process:!0});let e=new FormData;this.props.location.pathname.split("&"),e.append("url","RESTAPI/Payments/Payments"),e.append("media",this.props.media.media),e.append("media_id",this.props.media.media_id),e.append("element_id",this.props.element),e.append("media_type",this.props.media.media_type),e.append("media_appartenance",this.props.media.content_type),x("/payments",e,s=>{this.setState({message:s,step:s.step,process:!1})})});w(this,"paymentProcess",()=>{this.setState({process:!0});let e=new FormData;this.props.location.pathname.split("/"),e.append("url","RESTAPI/Payments/Payments"),e.append("media",this.props.media.media),e.append("media_id",this.props.media.media_id),e.append("password",this.state.password),e.append("element_id",this.props.element),e.append("media_appartenance",this.props.media.content_type),e.append("media_type",this.props.media.media_type),x("/payments",e,s=>{this.setState({message:s,step:s.step,process:!1}),s.success===1&&s.data&&s.data.type==="DEBLOCAGE_SUCCESS"&&(this.props.media_change(s.data.media_src),this.setState({modal:!1}))})});w(this,"HandleChange",e=>{const s=e.target.name;this.setState({[s]:e.target.value})});this.state={modal:!1,message:[],step:1,password:"",process:!1}}render(){var e,s,i,d,p,u,h,l;return t.createElement("div",{className:"Fdo aovydwv3"},t.createElement("button",{className:"sqdOP Xdg L3NKy ZIAjV _Dvgb RlF",onClick:()=>this.setState({modal:!0})},this.props.text?"D\xE9bloquer ce contenu pour":""," ",(s=(e=this.props)==null?void 0:e.media)==null?void 0:s.price," ",(d=(i=this.props)==null?void 0:i.session)==null?void 0:d.currency),t.createElement(O,{show:this.state.modal,onHide:()=>this.setState({modal:!1}),nopadding:"true"},t.createElement("div",{className:"Fdo Anv Bsj"},t.createElement(j,{onClick:()=>this.props.navigate(-1),title:"Debloquer ce contenu"}),this.state.message.length!=0&&t.createElement("div",{className:"Fdo RpE Lns",style:{zIndex:1}},t.createElement("div",{className:this.state.message.success===1?"alert alert-success ":"alert alert-danger",role:"alert"},t.createElement("div",{className:"Fdo Aic"},t.createElement("div",{className:"Fdo Bsj"},t.createElement("span",null,this.state.message.message))))),t.createElement("div",{className:"Fdo Lns Aic Anv"},t.createElement("div",{className:"Fdo"},t.createElement(B,{size:50})),t.createElement("div",{className:"Fdo"},t.createElement("span",null,(u=(p=this.props)==null?void 0:p.media)==null?void 0:u.price),t.createElement("span",null,(l=(h=this.props)==null?void 0:h.session)==null?void 0:l.currency))),this.state.step===2&&t.createElement("div",{className:"Fdo Lns Aic Anv Pap",style:{transitionDuration:"2s"}},t.createElement(A,{type:"password",onChange:this.HandleChange,value:this.state.password,name:"password",placeholder:"Votre mot de passe"},"veuillez Taper votre mot de passe")),t.createElement("div",{className:"Fdo pybr56ya tw6a2znq f10w8fjw vcx Lns"},this.state.step===2?t.createElement("div",{className:"Fdo "},t.createElement(N,{variant:"_Dvgb",disabled:!(this.state.password.length>=8),onClick:this.paymentProcess,isLoading:this.state.process},"Envoyer")):t.createElement("div",{className:"Fdo "},t.createElement(N,{isLoading:this.state.process,variant:"_sdb",onClick:this.ConfirmDeblockage},this.state.message.success===0?"R\xE9essayer":"D\xE9bloquer")),t.createElement("div",{className:"Fdo tw6a2znq"},t.createElement(N,{variant:"_8A5w5",onClick:()=>this.setState({modal:!1})},"Annuler"))))))}}var Z=q(H);function O(a){return t.createElement(R,m(c({},a),{size:a.size,"aria-labelledby":"modal-payment",centered:!0}),t.createElement("div",{className:"Fdo"},a.children))}const Y=a=>{const[e,s]=o.exports.useState({isPlaying:!1,progress:0,speed:1,isMuted:!1}),[i,d]=o.exports.useState(0),[p,u]=o.exports.useState(0),[h,l]=o.exports.useState(0),g=()=>{s(m(c({},e),{isPlaying:!e.isPlaying})),u(a.current.duration)};o.exports.useEffect(()=>{var n=window.setInterval(function(){var r,v;l((r=a.current)==null?void 0:r.currentTime),d(((v=a.current)==null?void 0:v.currentTime)/a.current.duration*100)},1e3);return()=>{window.clearInterval(n)}},[]),o.exports.useEffect(()=>{a.current.volume=.1,e.isPlaying?a.current.play():a.current.pause()},[e.isPlaying,a]);const y=()=>{const n=a.current.currentTime/a.current.duration*100;s(m(c({},e),{progress:n}))},k=n=>{const r=Number(n.target.value);a.current.currentTime=a.current.duration/100*r,s(m(c({},e),{progress:r}))},f=n=>{const r=Number(n.target.value);a.current.playbackRate=r,s(m(c({},e),{speed:r}))},C=()=>{s(m(c({},e),{isMuted:!e.isMuted}))};return o.exports.useEffect(()=>{e.isMuted?a.current.muted=!0:a.current.muted=!1},[e.isMuted,a]),{playerState:e,togglePlay:g,handleOnTimeUpdate:y,handleVideoProgress:k,handleVideoSpeed:f,toggleMute:C,videoTime:p,progressbar:i,currentTime:h}},G=a=>{const e=t.useRef(null),{playerState:s,togglePlay:i,handleOnTimeUpdate:d,handleVideoProgress:p,handleVideoSpeed:u,toggleMute:h,videoTime:l,progressbar:g,currentTime:y}=Y(e);t.useState(50);const[k,f]=t.useState(20),[C,n]=t.useState(!1),[r,v]=t.useState(!1),D=E=>{n(!C)},b=E=>{C&&f(E.nativeEvent.offsetY)},_=E=>{var S=E.nativeEvent.layerY-80;S<=-0&&S>=-80&&f(S)};return t.createElement("div",{className:"TafarayPopMediaContainer",onMouseOver:()=>v(!0),onMouseLeave:()=>v(!1)},t.createElement("video",{id:"video1",src:a.video,ref:e,className:" hty d2edcug0",onTimeUpdate:d,onClick:i,poster:a==null?void 0:a.poster}),t.createElement("button",{className:"LCR hgf pIc shadowvg svgPlay",style:{pointerEvents:r?"fill":""},onClick:i},s.isPlaying?"":t.createElement(I,{size:32})),t.createElement("div",{className:"tiktok-174tqkn-DivVideoControlContainer e1rpry1m5",style:{opacity:r&&s.isPlaying?1:""}},t.createElement("div",{className:"tiktok-bo5mth-DivSeekBarContainer e1rpry1m0"},t.createElement("div",{className:"tiktok-j48lkt-DivSeekBarProgress e1rpry1m2"}),t.createElement("div",{className:"tiktok-1ioucls-DivSeekBarCircle e1rpry1m4",style:{left:`calc(${g}%)`}}),t.createElement("div",{className:"tiktok-kqqewi-DivSeekBar e1rpry1m3",style:{transform:`scaleX(${g}%) translateY(-50%)`}})),t.createElement("div",{className:"tiktok-o2z5xv-DivSeekBarTimeContainer e1rpry1m1"},Math.floor(y/60)+":"+("0"+Math.floor(y%60)).slice(-2),"/",Math.floor(l/60)+":"+("0"+Math.floor(l%60)).slice(-2))),t.createElement("div",{className:"tiktok-go7hiw-DivVoiceControlContainer e11s2kul26"},t.createElement("div",{className:"tiktok-t8cj5n-DivVolumeControlContainer e1exqkaz0"},t.createElement("div",{className:"tiktok-m4h4si-DivVolumeControlProgress e1exqkaz1",onMouseMove:b,onClick:_}),t.createElement("div",{className:"tiktok-1wejges-DivVolumeControlCircle e1exqkaz3",onDragStart:D,style:{transform:`translateY(${k-80}px)`}}),t.createElement("div",{className:"tiktok-zo7bs8-DivVolumeControlBar e1exqkaz2",style:{transform:`scaleY(${Math.abs(k)/100})`}})),t.createElement("button",{"data-e2e":"browse-sound",className:"tiktok-1k03x17-ButtonVoiceControlNew e11s2kul25"},t.createElement("svg",{width:"40",height:"40",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("circle",{cx:"24",cy:"24",r:"24"}),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 16.9118C21 15.2513 20.8942 15.0909 20.709 15.0221C20.5238 14.9763 20.3122 14.9992 20.1799 15.1138L15.0741 19.5258H11.4762C11.2116 19.5258 11 19.7092 11 19.9384V28.084C11 28.3132 11.2116 28.4965 11.4762 28.4965H15.0741L20.1799 32.8862C20.3122 33.0008 20.5238 33.0237 20.709 32.9779C20.8942 32.9091 21 32.7487 21 32.5882V16.9118Z",fill:"white"}),t.createElement("path",{d:"M30.6653 15C32.7348 17.2304 34.0001 20.2174 34.0001 23.5C34.0001 26.7826 32.7348 29.7696 30.6653 32",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),t.createElement("path",{d:"M26.8799 17.8833C28.1994 19.381 28.9999 21.347 28.9999 23.5C28.9999 25.653 28.1994 27.6191 26.8799 29.1168",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"})))))};export{Z as M,G as P};

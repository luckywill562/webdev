import{R as e,r as i,b as u,u as N,g as n}from"./vendor.7b712f9f.js";import{w as E,F as _}from"./GeneralCondition.59d0a2ff.js";import{_ as b,ab as R,ac as h,ad as x,ae as y}from"./main.da775b16.js";const F=({content:a,author:r})=>e.createElement("div",{className:"Fdo Anv"},(a==null?void 0:a.message_type)==="INFO"?e.createElement("div",{className:"Fdo Anv Aic"},e.createElement("div",{className:"Fdo _4EzTm Aic Eho LCR vTu cgat1ltu "},e.createElement("img",{className:"hty ELG hrt",src:r==null?void 0:r.avatar})),e.createElement("div",{className:"_7UhW9    MMzan    _0PwGv  Vgd"},a!=null&&a.sended?"vous avez ":(r==null?void 0:r.username)+" a ",a==null?void 0:a.texte_info)):e.createElement("div",{className:"Fdo",style:{justifyContent:a!=null&&a.sended?"flex-end":"flex-start",paddingBottom:"1px"}},e.createElement("div",{className:"Fdo b2r Bsj Aic",style:{flexDirection:a!=null&&a.sended?"column":"row"}},!(a!=null&&a.sended)&&e.createElement("div",{className:"Fdo _4EzTm Aic Eho LCR vTu cgat1ltu "},e.createElement("img",{className:"hty ELG hrt",src:r==null?void 0:r.avatar})),a.sended?e.createElement("div",{className:"Bwt Obm bBA",style:{color:"#f1f1f1",padding:"8px 16px",borderTopRightRadius:"0.9rem",borderBottomRightRadius:"0.9rem",borderTopLeftRadius:"0.9rem",borderBottomLeftRadius:"0.9rem"}},e.createElement("span",{className:"SubContent",dangerouslySetInnerHTML:{__html:a.subject}})):e.createElement("div",{className:"Bwt QOqBd",style:{color:"#262626",padding:"8px 16px",borderTopLeftRadius:"0.9rem",borderBottomLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",borderBottomRightRadius:"0.9rem"}},e.createElement("span",{className:"SubContent",dangerouslySetInnerHTML:{__html:a.subject}}))))),f=i.exports.lazy(()=>b(()=>import("./Form.4d5e384f.js"),["Form.4d5e384f.js","vendor.7b712f9f.js","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css"])),w=a=>{var d,o;const r=u(),c=N(s=>s),t=c==null?void 0:c.GroupConversations.find(s=>(s==null?void 0:s.group.group_id)===a.useParams.circle_id);i.exports.useEffect(()=>{var s;(s=t==null?void 0:t.conversations)!=null&&s.length||g()},[a.useParams.circle_id]);let l=t==null?void 0:t.conversations;e.useEffect(()=>{l&&v()},[t]);const v=()=>{var s;if(l){let m={data_type:"circleDiscussion",circle_id:a.useParams.circle_id,c_user:n.get("s_id"),security_token:n.get("isLogedin"),sub_type:"seenConversation",author:c.Util.min_user_content,client_id:(s=l[(l==null?void 0:l.length)-1])==null?void 0:s.author.user_id};c.Util.ws.send(JSON.stringify(m)),r(R(a.useParams.circle_id))}},g=()=>{var s=new FormData;s.append("url","/RESTAPI/Circle/getDiscussions"),s.append("group_id",a.useParams.circle_id),_("/api",s,m=>{(m==null?void 0:m.success)===1&&(m==null?void 0:m.status)===200?r(h(m==null?void 0:m.message)):a.navigate("/404")})};return e.createElement("div",{className:"Fdo Box-conversation-right hty"},e.createElement("div",{className:"Fdo Anv App"},e.createElement("div",{className:"conversation-header messagerie"},e.createElement("div",{className:"S-mcP messagerie"},e.createElement("div",{className:"AjEzM messagerie"},e.createElement("div",{className:"m7ETg messagerie"},e.createElement("div",{className:"Fdo   Fdo Igw0E   rBNOH  eGOV_  ybXk5    _4EzTm"},e.createElement("div",{className:"page _4EzTm ovd yC0tu"},e.createElement(x,{avatarsize:32,users:(d=t==null?void 0:t.group)==null?void 0:d.members})),e.createElement("div",{className:"page Fdo  Igw0E     IwRSH  Lns vwCYk"},e.createElement("div",{className:" page     qF0y9     Igw0E     IwRSH      eGOV_       acqo5   _4EzTm"},e.createElement("div",{className:"_7UhW9 Fdo Aic  mWe xLCgt  KV-D4    fDxYl"},e.createElement("div",{className:"R19PB"},e.createElement("span",{className:"_7UhW9   xLCgt   se6yk",dangerouslySetInnerHTML:{__html:"blablabla"}})))),e.createElement("div",{className:"Fdo    Igw0E   IwRSH   eGOV_  _4EzTm  ksr   DhRcB "},e.createElement("div",{className:"_7UhW9   xLCgt  MMzan   fDxYl  "},e.createElement("span",{className:"R19PB"},e.createElement("span",{className:"_7UhW9   xLCgt  MMzan  se6yk",dangerouslySetInnerHTML:{__html:"derniere mise a jour il y a deux heures"}})))))))))),e.createElement("div",{className:"Fdo conversation-main"},e.createElement("div",{className:"Fdo Anv Pap"},t==null?void 0:t.conversations.map(({content:s,author:m},p)=>e.createElement(F,{content:s,author:m,key:p})),l&&((o=l[(l==null?void 0:l.length)-1])==null?void 0:o.content.sended)?e.createElement("div",{className:"Fdo bkfpd7mw"},t==null?void 0:t.viewers.map(s=>{var m;return e.createElement("div",{className:"Eho LCR hft RpE ",style:{margin:"4px 2px"},key:s==null?void 0:s.user_id},e.createElement("img",{src:(m=s==null?void 0:s.avatar)==null?void 0:m.x26,className:"hty ELG hrt ApE Udt"}))})):null)),e.createElement("div",{className:"conversation-footer"},e.createElement("div",{className:"Fdo aovydwv3 Vnk Kmm Pap"},e.createElement(i.exports.Suspense,{fallback:"chargement"},e.createElement(f,null))))))};var L=E(e.memo(w));const T=a=>e.createElement("div",{className:"Fdo Bcg Nfb ELG Flk main-app-width Pap"},e.createElement("div",{className:"Fdo messagerie-container sLayout"},e.createElement("div",{className:"container-box messages-wrapper"},e.createElement("div",{className:"messages-text-container"},e.createElement("div",{className:"conversation-container hty"},e.createElement(L,null))),e.createElement("div",{className:"Fdo DivRighConversationBox"},e.createElement("div",{className:"messages-list-wrapper"},e.createElement("div",{className:"messages-list-header"},e.createElement("div",{className:"messages-list-title"},"Groupes de discussions")),e.createElement("div",{className:"conversation-list-content"},e.createElement("div",{className:"side-bar-message-wrapper message-scrollabled-list messagerie"},a.list.map((r,c)=>e.createElement("div",{key:c},e.createElement(y,{element:r,path:`/circle/inbox/${r.group_id}`}))))))))));var I=E(T);export{I as default};

var E=Object.defineProperty;var _=(a,t,s)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var r=(a,t,s)=>(_(a,typeof t!="symbol"?t+"":t,s),s);import{R as e,b as x,u as b,S as f,d as N,L as y}from"./vendor.7b712f9f.js";import{w as F,F as u,i as v,aC as w,aD as S}from"./GeneralCondition.59d0a2ff.js";import{a2 as C,s as P,e as g}from"./main.da775b16.js";const k=a=>{const[t,s]=e.useState(void 0),o=x();e.useEffect(()=>{i(a.location.pathname+a.location.search)},[a.location.search]);const n=b(c=>c),d=()=>{a.navigate(n.viewBoxHistory)};e.useEffect(()=>{a.location.state&&o(C(a.location.state.mediachat.pathname))},[]);const i=c=>{var l=new FormData;l.append("url","RESTAPI/Chat/viewBox"),u(c,l,m=>{var p;m.success===1?s((p=m==null?void 0:m.payload)==null?void 0:p.media):o(P(m))})};return e.createElement(g,{show:!0,onHide:()=>a.navigate(-1),size:"sm",nopadding:"true"},e.createElement("div",{className:"Dapi"},e.createElement("div",{className:"Fdo  messages-wrapper",style:{borderRadius:0}},e.createElement("button",{className:"StyledCloseIconContainer",onClick:d},e.createElement(v,{size:36})),e.createElement("div",{className:"Fdo Aic Bsj"},e.createElement("div",{className:"messages-text-container  RpG Fdo Aic Lns",style:{background:"rgb(0,0,0)"}},t&&e.createElement(e.Fragment,null,e.createElement("div",{className:"DivBlurBackground",style:{backgroundImage:`url(${t.media_src})`}}),t.media_type==="video"?e.createElement("video",{className:"eximg",src:t.media_src,controls:!0}):e.createElement("img",{className:"eximg",src:t.media_src})))))))};class R extends e.Component{constructor(t){super(t);r(this,"onDismiss",()=>{this.state.boxHistory,this.props.navigate(-this.state.boxHistory)});r(this,"countHistory",()=>{this.setState({boxHistory:this.state.boxHistory+1})});r(this,"GetImage",()=>{if(this.state.medias){const t=this.state.medias.slice(),s=t.find(i=>i.media_id===this.props.useParams.media_id);this.setState({media:s});const o=t.findIndex(i=>i.media_id===this.props.useParams.media_id),n=t[o+1],d=t[o-1];if(n){const i=n.media_id;this.setState({media_next:i})}else this.setState({media_next:void 0});if(d){const i=d.media_id;this.setState({media_prev:i})}else this.setState({media_prev:void 0})}});r(this,"onDismiss",()=>{this.props.navigate(-1)});this.state={post:void 0,medias:[],media:void 0,media_next:void 0,media_prev:void 0,boxHistory:1,boxLoading:!0,Post_author:[],user_post:[]}}componentDidMount(){console.log(this.props);var t=new FormData;t.append("message_id",this.props.useParams.message_id),t.append("url","RESTAPI/Chat/viewBox"),u(props.location.pathname+props.location.search,t,s=>{this.setState({medias:s.posts.media,boxLoading:!1}),this.state.medias.length>0&&this.GetImage()})}componentDidUpdate(t,s,o){if(+this.props.useParams.media_id!=+t.useParams.media_id){this.GetImage();var n=this.state.boxHistory+1;this.setState({boxHistory:n}),console.log(this.state.boxHistory)}}render(){const t=this.state.media;return this.state.Post_author,e.createElement(g,{show:!0,onHide:()=>this.props.navigate(-1),size:"sm",nopadding:"true"},e.createElement("div",{className:"Dapi"},e.createElement("div",{className:"Fdo  messages-wrapper",style:{borderRadius:0,background:"rgb(0,0,0)"}},e.createElement("div",{className:"Fdo ApE p1c"},e.createElement("div",{className:"wGH Vnk"},e.createElement("button",{className:"pIc",onClick:this.onDismiss},e.createElement("span",{className:"Fdo LCR tBo hgf"},e.createElement(v,{size:36}))))),e.createElement("div",{className:"Fdo Aic Bsj"},e.createElement("div",{className:"messages-text-container  RpG Fdo Aic Lns"},this.state.boxLoading?e.createElement("div",{className:"Fdo RpG App Flk Aic Lns",style:{alignContent:"center"}},e.createElement(f,{animation:"border"}),e.createElement("h2",null,"Chargement...")):e.createElement(e.Fragment,null,this.state.media&&e.createElement(e.Fragment,null,t.media_type==="video"?e.createElement("video",{className:"k4urcfbm bixrwtb6 datstx6m Fdo",src:t.media_src,controls:!0}):e.createElement("img",{className:"k4urcfbm bixrwtb6 datstx6m Fdo",src:t.media_src})),e.createElement("div",{className:"Fdo RpG App Flk Aic"},this.state.media_prev&&e.createElement(h,{client_id:this.props.useParams.id,post_id:this.props.useParams.message_id,media_id:this.state.media_prev},e.createElement("div",{className:"brt hgf"},e.createElement(w,{size:42}))),this.state.media_next&&e.createElement(h,{post_id:this.props.useParams.message_id,client_id:this.props.useParams.id,media_id:this.state.media_next},e.createElement("div",{className:"brt hgf"},e.createElement(S,{size:42}))))))))))}}var L=F(k);function h({media_id:a,children:t,post_id:s,client_id:o}){return N(),e.createElement(y,{to:`/inbox/${o}/${s}/media/${a}`},t)}export{L as default};

import{b as v,u as f,R as t,S as b,g as F}from"./vendor.7b712f9f.js";import{e as g,i as L,o as N,j as A,k as S,l as h,m as B,s as U,c as O}from"./main.da775b16.js";import{w as R,P as d}from"./GeneralCondition.59d0a2ff.js";import{M as _}from"./Template.529b8812.js";const k=e=>{var c,m;const l=v(),a=f(n=>n),[E,o]=t.useState(!1),[y,r]=t.useState(!1),u=()=>{if(e.user.private&&!e.user.requested_follow_by_viewer&&!e.user.followed_by_viewer)var n="REQUEST";else if(e.user.has_requested_follow_viewer)var n="REPLY";else if(!e.user.private&&!e.user.has_requested_follow_viewer&&!e.user.followed_by_viewer)var n="FOLLOW";else if(e.user.followed_by_viewer)var n="UNFOLLOW";else if(e.user.requested_follow_by_viewer)var n="DELETE_REQUEST";o(!0),r(!1);var i=new FormData;i.append("action",n),i.append("url","RESTAPI/Users/follow"),i.append("user_id",e.user.user_id),L("./api",i,s=>{if((s==null?void 0:s.success)==1&&(l(N({user_id:e.user.user_id,type:s.type})),l(A({user_id:e.user.user_id,type:s.type})),l(S({user_id:e.user.user_id,type:s.type})),l(h({user_id:e.user.user_id,type:s.type})),l(B({user_id:e.user.user_id,type:s.type}))),o(!1),l(U(s)),setTimeout(()=>{l(O())},2e3),s.success===1&&s.type==="REQUEST"||s.type==="UNFOLLOW"||s.type==="DELETE_REQUEST"&&e.user.private){let w={data_type:"notifications",sub_type:"NEW_FOLLOWING_REQUEST",c_user:a.Util.c_user.user_id,security_token:F.get("isLogedin"),client_id:parseInt(e.user.user_id),user_data:s.user,follower_type:s==null?void 0:s.type};a.Util.ws.send(JSON.stringify(w))}})};return t.createElement("div",{className:`Fdo ${e.type==="button"&&"Lbdf "}`},!e.user.viewer&&t.createElement(t.Fragment,null,t.createElement("div",{className:"Fdo RpE"},E&&t.createElement("div",{className:"ApE kVc hty ELG p1c"},t.createElement("div",{className:"Fdo hty  Aic Lns"},t.createElement(b,{size:"sm",animation:"border"}))),e.user.followed_by_viewer?t.createElement("button",{className:`sqdOP   L3NKy ZIAjV  ${e.type==="button"?" Xdg Bsj Bgu":"lZJ"}`,onClick:()=>r(!0)},t.createElement("div",{className:"Fdo"},e.type==="button"&&t.createElement("span",{className:"Fdo Aic"},t.createElement(d,{size:18})),t.createElement("span",{className:"Fdo LmP"},"Abonn\xE9(e)"))):t.createElement("button",{to:"#",className:`sqdOP   L3NKy ZIAjV ${e.type==="button"?` Xdg Bsj ${e.user.requested_follow_by_viewer||e.user.followed_by_viewer?"Bgu":"_Dvgb"} `:" lZJ "}`,onClick:u},t.createElement("div",{className:"Fdo"},e.type==="button"&&t.createElement("span",{className:"Fdo Aic"},t.createElement(d,{size:18})),e.user.requested_follow_by_viewer?t.createElement("span",{className:"Fdo LmP"},"Demande envoy\xE9"):t.createElement("span",{className:"Fdo LmP"},"S'abonner ",(c=e==null?void 0:e.user)!=null&&c.has_follow_viewer?"en retour":"")))),t.createElement(g,{show:y,onHide:()=>r(!1),size:"logout",nopadding:"true"},t.createElement("div",{className:"Fdo Anv Bsj Lns",style:{width:220,minHeight:60}},t.createElement("div",{className:"Fdo Anv"},t.createElement(_,{onClick:u,to:"#",variant:"hbc"},"Se d\xE9sabonner"),t.createElement(_,{state:{background:e.location},to:`/${(m=e.user)==null?void 0:m.username}/premium`,variant:"g1lx"},"devenir premium"))))))};var C=R(k);export{C as F};

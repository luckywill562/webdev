import{a1 as _,I as ue,d as ve,_ as Ee,a2 as ne,e as _e,a3 as ge,a4 as se,s as L,c as x}from"./main.da775b16.js";import{b as ce,R as a,L as pe,r as ie,u as he}from"./vendor.7b712f9f.js";import{F as h,w as fe,i as we,az as C,L as ye,aC as Ne,z as be,aD as ke,K as Le,R as xe,c as Ce,S as Fe,g as Ae,H as Se,ac as Me,t as Ie}from"./GeneralCondition.59d0a2ff.js";import{P as Pe,M as ze}from"./Player.8bc9ee43.js";const Re=t=>{var d,y,k,N;const e=ce(),[g,v]=a.useState(!1),f={reply:!1,parent_id:(y=(d=t==null?void 0:t.content)==null?void 0:d.content)==null?void 0:y.media_id,element_id:(N=(k=t==null?void 0:t.content)==null?void 0:k.content)==null?void 0:N.media_id,type:t.content.content.content_type+"_media"};a.useEffect(()=>{t.content.comments.length===0&&t.content.has_next_page&&b()},[t.content.content.media_id]);const b=()=>{if(v(!0),t.content.comments.length===0)var E=0;else var E=t.content.comments[t.content.comments.length-1].response_id;var s=new FormData;s.append("url","RESTAPI/comments/get"),s.append("page",E),s.append("params",JSON.stringify(f)),h("/api",s,i=>{i.success===1?e(_({content:t.content,action:"pushComments",payload:i})):e(showAlertBox(i)),v(!1)})},w=E=>{E.preventDefault(),e(singleAlbumActions({album_id:t.content.album_id,action:"RELOAD_COMMENT"})),v(!0);var s=new FormData;s.append("url","RESTAPI/comments/get"),s.append("page",0),s.append("params",JSON.stringify(f)),h("/api",s,i=>{i.success===1||e(showAlertBox(i)),v(!1)})};return a.createElement(a.Fragment,null,a.createElement(pe,{to:"#",onClick:w},"reload"),!t.content.has_next_page&&!g&&t.content.comments.length===0?a.createElement("div",{className:"Fdo Aic Lns hty"},"Aucun commentaire"):a.createElement(ue,{next:b,next_page:t.content.has_next_page,loading:g,margin:"0px"},a.createElement(ve,{comment:t.content.comments})))},Te=ie.exports.lazy(()=>Ee(()=>import("./main.da775b16.js").then(function(t){return t.an}),["main.da775b16.js","main.5922880b.css","vendor.7b712f9f.js","GeneralCondition.59d0a2ff.js","GeneralCondition.c3442c85.css"])),Be=t=>{var M,I,P,z,R,T,B,V,D,G,U,$,H,O,j,q,K,X,J,W,Y,Q,Z,ee,ae,te;const[e,g]=a.useState(void 0),[v,f]=a.useState(!1),[b,w]=a.useState(!1),[d,y]=a.useState(void 0),[k,N]=a.useState(""),E=a.useRef(),s=ce(),i=he(c=>c),F=()=>{t.navigate(i.viewBoxHistory)};a.useEffect(()=>{t.location.state&&t.location.state.background?s(ne(t.location.state.background.pathname)):s(ne(i.viewBoxHistory)),N(t.location.pathname+"/likes"+t.location.search)},[]);const A=c=>{const n=i.MediaListView.findIndex(l=>l.content.media_link===c);if(n>=0)w(!1),g(i.MediaListView[n]),y(i.MediaListView[n].author);else{f(!0);var m=new FormData;m.append("url","RESTAPI/media/get"),m.append("media_link",c),h(`${c}`,m,l=>{f(!1),w(!1),l.success===0?t.navigate("/404"):(y(l.payload.author),g(l.payload),s(ge(l.payload)))})}};a.useEffect(()=>{w(!0),A(t.location.pathname+t.location.search)},[t.location.search]);const S=c=>{A(c),history.pushState(null,"index",c);const n=c.split("?"),m=n[0]+"/likes?"+n[1];N(m)};a.useEffect(()=>{if(e){const c=i.MediaListView.findIndex(n=>n.content.media_id===e.content.media_id);c>=0&&g(i.MediaListView[c])}},[i.MediaListView]);const le=c=>{if(e.content.media_type==="video")s(se(e.content.media_id));else{var n=new XMLHttpRequest;n.open("GET",c,!0),n.responseType="arraybuffer",n.onload=function(m){var l=new Uint8Array(this.response),o=new Blob([l],{type:"image/jpg"}),r=window.URL||window.webkitURL,u=r.createObjectURL(o);E.current.src=u,s(se(e.content.media_id))},n.send()}},me=c=>{var m,l,o,r;if(c.length>0){let u=Math.floor(Math.random()*1e19+1);const de={response_content:Me(Ie(c)),discussion_id:e.content.media_id,response_id:u,author_id:d.user_id,author_name:d.first_name,author_username:d.username,author_avatar:i.Util.c_user.avatar.x56,process:!0,posted_date:"maintenant",type:e.content.content_type};s(_({content:e,comment:de,action:"push_comment"}));var n=new FormData;n.append("element_id",(m=e==null?void 0:e.content)==null?void 0:m.media_id),n.append("comment_content",c),n.append("type",((l=e==null?void 0:e.content)==null?void 0:l.content_type)+"_media"),n.append("fakeID",u),n.append("author_id",(o=e==null?void 0:e.author)==null?void 0:o.user_id),n.append("url","RESTAPI/comments/new"),n.append("parent_id",(r=e==null?void 0:e.content)==null?void 0:r.media_id),n.append("reply",0),h("/api",n,p=>{p.success===1&&s(_({content:e,comment:p==null?void 0:p.data,action:"confirm_added",fakeID:u})),s(L(p)),setTimeout(()=>{s(x(p))},1e3)})}},oe=()=>{var l,o,r;if(((l=e==null?void 0:e.content)==null?void 0:l.liked_by_viewer)==!0)var c="UNLIKE";else var c="LIKE";s(_({content:e,action:"reaction"}));var n=new FormData;const m={element_id:(o=e==null?void 0:e.content)==null?void 0:o.media_id,author_id:(r=e==null?void 0:e.author)==null?void 0:r.user_id,action:c,element_type:"media"};n.append("url","RESTAPI/Likes/Like"),n.append("params",JSON.stringify(m)),h("/api",n,u=>{s(_({content:e,action:"reaction",likes:u.likes})),s(L(u)),setTimeout(()=>{s(x())},2e3)})},re=()=>{var m,l,o;if(((m=e==null?void 0:e.content)==null?void 0:m.saved_by_viewer)==!0)var c="unsave";else var c="save";s(_({content:e,action:"save"}));var n=new FormData;n.append("action",c),n.append("url","RESTAPI/media/save"),n.append("media_id",(l=e==null?void 0:e.content)==null?void 0:l.media_id),n.append("type",(o=e==null?void 0:e.content)==null?void 0:o.content_type),h("/api",n,r=>{r.success===0&&s(_({content:e,action:"saved"})),s(L(r)),setTimeout(()=>{s(x())},2e3)})};return a.createElement(_e,{show:!0,onHide:()=>t.navigate(-1),size:"sm",nopadding:"true"},a.createElement("div",{className:"Dapi"},a.createElement("div",{className:"Fdo  messages-wrapper",style:{borderRadius:0}},a.createElement("button",{className:"StyledCloseIconContainer",onClick:F},a.createElement(we,{size:36})),a.createElement("div",{className:"Fdo Aic Bsj"},a.createElement("div",{className:"messages-text-container  RpG Fdo Aic Lns",style:{background:"rgb(0,0,0)"}},e&&a.createElement("div",{className:"DivBlurBackground",style:{backgroundImage:`url(${e.content.media_src})`}}),a.createElement("button",{className:"pIc StyledSignelIconContainer",onClick:F},a.createElement("span",{className:"Fdo PLP"},a.createElement(C,{size:20})),a.createElement("span",{className:"Fdo"},"Signaler")),v||!e?a.createElement(ye,null):a.createElement(a.Fragment,null,e.content.prev&&a.createElement("button",{className:"ApE fdVbn pIc p1c",onClick:()=>S(e.content.prev)},a.createElement("div",{className:"Fdo LCR tBo hgf"},a.createElement(Ne,{size:42}))),((M=e==null?void 0:e.content)==null?void 0:M.media_type)==="video"?a.createElement(Pe,{video:`/watch/${(I=e==null?void 0:e.content)==null?void 0:I.media}`,poster:(P=e==null?void 0:e.content)==null?void 0:P.media_src}):a.createElement("img",{className:"eximg",ref:E,src:`${(z=e==null?void 0:e.content)==null?void 0:z.media_src}`}),((R=e==null?void 0:e.content)==null?void 0:R.blocked)&&!((T=e==null?void 0:e.content)!=null&&T.viewer_can_see)&&((B=e==null?void 0:e.content)==null?void 0:B.media_type)==="image"&&a.createElement(be,null),((V=e==null?void 0:e.content)==null?void 0:V.next)&&a.createElement("button",{className:"ApE vbyrt pIc p1c",onClick:()=>{var c;return S((c=e==null?void 0:e.content)==null?void 0:c.next)}},a.createElement("div",{className:"Fdo LCR tBo hgf"},a.createElement(ke,{size:42}))),((D=e==null?void 0:e.content)==null?void 0:D.blocked)&&!((G=e==null?void 0:e.content)!=null&&G.viewer_can_see)?a.createElement("div",{className:"Fdo aovydwv3 ApE",style:{bottom:10}},a.createElement(ze,{media:e==null?void 0:e.content,author:e==null?void 0:e.author,element:(U=e==null?void 0:e.content)==null?void 0:U.media_id,text:!0,media_change:le,session:i.Util.c_user})):null)),a.createElement("div",{className:"Fdo box-overlay hty ljhf n8ej3o3l p1c"},a.createElement("div",{className:"messages-list-wrapper"},b||!d?a.createElement("div",{className:"Fdo Kmm Pag vcx"},a.createElement("div",{className:"Fdo ELG Anv"},a.createElement(Le,{length:1}))):a.createElement("div",{className:"Fdo Kmm Vnk Pag vcx"},a.createElement(xe,{author:d})),v||!e?null:a.createElement(a.Fragment,null,a.createElement("div",{className:"conversation-list-content gslkf"},a.createElement("div",{className:"Fdo Anv"},a.createElement("div",{className:"Fdo Vnk Pag vcx Anv"},(($=e==null?void 0:e.content)==null?void 0:$.blocked)&&((H=e==null?void 0:e.content)==null?void 0:H.create_by_viewer)?a.createElement("div",{className:"Fdo Ngt G7mk bi6gxh9e"},a.createElement("div",{className:"E6d Fdo Ert Vpe Lsy LDv"},a.createElement("div",{className:"cgat1ltu"},a.createElement(C,{size:20})),a.createElement("div",{className:""},"ce contenu est bloqu\xE9 mais vous le voyez car vous \xEAtes l'auteur, seuls vous, vos abonn\xE9s premium ou les personnes qui ont pay\xE9 peuvent voir ceci"))):a.createElement(a.Fragment,null),((O=e==null?void 0:e.content)==null?void 0:O.blocked)&&((j=e==null?void 0:e.content)==null?void 0:j.viewer_can_see)&&!((q=e==null?void 0:e.content)!=null&&q.create_by_viewer)&&a.createElement("div",{className:"Fdo Ngt G7mk bi6gxh9e"},a.createElement("div",{className:"E6d Fdo Ert Vpe Lsy LDv"},a.createElement("div",{className:"cgat1ltu"},a.createElement(C,{size:20})),a.createElement("div",{className:""},"Ce contenu est bloqu\xE9 mais vous le voyez car vous \xEAtes abonn\xE9s premium ou vous avez debloqu\xE9 le contenu"))),a.createElement("div",{className:"Fdo"},a.createElement("span",{className:"Data-description-container SMy",dangerouslySetInnerHTML:{__html:(K=e==null?void 0:e.content)==null?void 0:K.description}})))),a.createElement("div",{className:"vcx Kmm Pag"},a.createElement(Re,{content:e}))),a.createElement("div",{className:"Fdo Anv"},a.createElement("section",{className:"ltpMr ndfg gslkf Pag vcx"},a.createElement("div",{className:"Fdo"},a.createElement("span",{className:"_7UhW9  PIoXz   Tui Ert    MMzan    _0PwGv   fDxYl     "},(X=e==null?void 0:e.content)==null?void 0:X.date)),a.createElement("div",{className:"Fdo Aic Cdf"},a.createElement("div",{className:"card-action Fdo ELG Cdf Aic Pac"},a.createElement("span",{className:"PaN klpyt"},a.createElement("button",{onClick:oe,className:(J=e==null?void 0:e.content)!=null&&J.liked_by_viewer?"post-action unfavourite-button":"post-action favourite-button"},(W=e==null?void 0:e.content)!=null&&W.liked_by_viewer?a.createElement("span",{className:"hbc"},a.createElement(Ce,{size:24})):a.createElement("svg",{className:"sFc",width:24,height:24,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"#000000"},a.createElement("g",null,a.createElement("path",{d:"M 31.984,13.834C 31.9,8.926, 27.918,4.552, 23,4.552c-2.844,0-5.35,1.488-7,3.672 C 14.35,6.040, 11.844,4.552, 9,4.552c-4.918,0-8.9,4.374-8.984,9.282L0,13.834 c0,0.030, 0.006,0.058, 0.006,0.088 C 0.006,13.944,0,13.966,0,13.99c0,0.138, 0.034,0.242, 0.040,0.374C 0.48,26.872, 15.874,32, 15.874,32s 15.62-5.122, 16.082-17.616 C 31.964,14.244, 32,14.134, 32,13.99c0-0.024-0.006-0.046-0.006-0.068C 31.994,13.89, 32,13.864, 32,13.834L 31.984,13.834 z M 29.958,14.31 c-0.354,9.6-11.316,14.48-14.080,15.558c-2.74-1.080-13.502-5.938-13.84-15.596C 2.034,14.172, 2.024,14.080, 2.010,13.98 c 0.002-0.036, 0.004-0.074, 0.006-0.112C 2.084,9.902, 5.282,6.552, 9,6.552c 2.052,0, 4.022,1.048, 5.404,2.878 C 14.782,9.93, 15.372,10.224, 16,10.224s 1.218-0.294, 1.596-0.794C 18.978,7.6, 20.948,6.552, 23,6.552c 3.718,0, 6.916,3.35, 6.984,7.316 c0,0.038, 0.002,0.076, 0.006,0.114C 29.976,14.080, 29.964,14.184, 29.958,14.31z"}))))),a.createElement("button",{className:"post-action Comment-button"},a.createElement("svg",{className:"sFc",width:24,height:24,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"#000000"},a.createElement("g",null,a.createElement("path",{d:"M 1.898,29.382c 0.164,0.352, 0.518,0.576, 0.906,0.576c 2.87,0, 5.298-0.698, 8.056-2.324 C 12.198,27.846, 14.84,28.108, 16,28.108c 8.756,0, 15.878-5.846, 15.878-13.034S 24.756,2.042, 16,2.042S 0.122,7.886, 0.122,15.074 c0,3.388, 1.634,6.662, 4.51,9.088c-0.652,1.48-1.522,2.876-2.594,4.154C 1.79,28.616, 1.734,29.032, 1.898,29.382z M 2.122,15.074 c0-6.084, 6.226-11.034, 13.878-11.034s 13.878,4.95, 13.878,11.034S 23.652,26.108, 16,26.108c-1.148,0-4.136-0.308-5.146-0.504 c-0.244-0.044-0.498,0.002-0.71,0.128C 8.28,26.872, 6.654,27.524, 4.914,27.8c 0.75-1.136, 1.374-2.336, 1.86-3.586 c 0.162-0.418, 0.030-0.89-0.328-1.16C 3.656,20.942, 2.122,18.106, 2.122,15.074z"})))),a.createElement("button",{className:"post-action save-button",onClick:re},(Y=e==null?void 0:e.content)!=null&&Y.saved_by_viewer?a.createElement(Fe,{size:21}):a.createElement(Ae,{size:21}))),a.createElement("div",{className:"Pag"},a.createElement("span",{className:"mWe Pag"},(Q=e==null?void 0:e.content)==null?void 0:Q.count_comments," commentaires")))),a.createElement(Se,{media:e==null?void 0:e.content,to:`/likes/media/${(Z=e==null?void 0:e.content)==null?void 0:Z.media_id}`,state:{background:t.location.state?t.location.state.background:t.location}}),a.createElement("div",{className:"Fdo  pybr56ya tw6a2znq f10w8fjw vcx"},a.createElement("div",{className:"Fdo vcx"},a.createElement("div",{className:"Fdo Aic Hte Eho LCR _2dbep  ",style:{marginBottom:2,height:36,width:36}},a.createElement("img",{"data-src":`${(te=(ae=(ee=i==null?void 0:i.Util)==null?void 0:ee.c_user)==null?void 0:ae.avatar)==null?void 0:te.x56}`,className:"hty ELG hrt lazyload"}))),a.createElement(ie.exports.Suspense,{fallback:"loading"},a.createElement(Te,{onComment:me})))))))))))};var $e=fe(Be);export{$e as default};
